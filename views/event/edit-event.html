{% extends '__init__/layout.html' %}
{% block content %}
	<div class="container-fluid">
		<form action="">
			<div class="row">
				<div class="col-lg-3">

					<div class="cards my-3">

						<div class="d-flex justify-content-between align-items-center" style="height: 50px;">
							<h5 class="fw-bold">Edit Event</h5>
							<div class="d-flex">
								{% if event.accountId == accountId %}{% endif %}
							</div>
						</div>

						<div class="w-100 text-center my-3">
							<img src="/images/events.jpg" style="width: 100px; height: 90px;" id="account-picture">
						</div>
						<div class="w-auto">
							<div >
								<p class=" text-mute ">Event Name</p>
								<input type="text" name="name" value="{{event.name}}">

								<p class="text-mute fw-bold py-2">Event Type</p>
								<input type="text" name="type" value="{{event.type}}">

								<p class="text-mute fw-bold py-2">Description</p>
								<div class="">{{event.description}}</div>

								<p class="text-mute fw-bold py-2">Start Time</p>
								<input type="time" name="hourStart" value="{{event.hourStart}}">

								<p class="text-mute fw-bold py-2">End Time</p>
								<input type="time" name="hourEnd" value="{{event.hourEnd}}">

								{%set counter = 0 -%}
								{%set isAccepted = false %}
								{% for p in eventParticipants %}
									{% if p.accountId != accountId %}
										{%set counter = counter + s1 -%}
									{% endif %}

									{% if p.status == "accepted"%}
										{%set isAccepted = true %}
									{% endif %}

								{% endfor %}

								{% if event.creatorName != username %}
									{% if counter == 0 and not isAccepted %}
										<a class="btn btn-success" href="{{ctx.DOMAIN_NAME}}/events/participant/request?username={{username}}&clubId={{clubId}}&eventId={{event._id}}">Register</a>
									{% endif %}
									{%endif%}

								</div>
							</div>
							<br>
						</div>

					</div>

					<div class="col-lg-8">
						<div class="row">

							<div class="col-lg-12">
								<footer class="mt-3" id="profile-group">
									<div class="cards overflow-auto">
										<div class="card-content mb-3">
											<h5 class="fw-bold">Event Map</h5>
										</div>
										<div class="card-body d-flex justify-content-between">
											<div id="event-show-map" style="width: fit-content; height:300px;"></div>
											<input hidden="hidden" class="form-control form-control-sm mx-1 " id="showeventLocLong" value="{{event.long}}">
											<input hidden="hidden" class="form-control form-control-sm  mx-1" id="showeventLocLat" value="{{event.lat}}">
										</div>
									</div>
								</footer>
							</div>

							<div class="col-lg-12">
								<main>
									<div class="cards">
										<div class="card-content">
											<h5 class="fw-bold">Description</h5>
										</div>
										<div class="card-body">
											<textarea name="description" class="w-100 h-50">{{event.description}}</textarea>
										</div>
									</div>
								</main>
							</div>
							<div class="col-lg-12">
								<main>
									<div class="cards">
										<div class="card-content">
											<h5 class="fw-bold">Administrative Options</h5>
										</div>
										<div class="card-body">
											<button class="btn-danger">delete club</button>
										</div>
									</div>
								</main>
							</div>

						</div>
					</div>
					<span>
						<button class="d-inline btn btn-sm btn-success">update</button>
						<a class="d-inline btn btn-sm btn-success" href="{{ctx.DOMAIN_NAME}}/events/show?clubId={{clubId}}&eventId={{event._id}}">cancel</a>
					</span>
				</div>

			</div>

		</form>
	</div>
	<script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol?callback=GetShowEventMap&key=Avdjdh0dcTQygVUUyePmkfhJrLB2zOS-hAej45Sw9C2vc0EZg_A8TmY1Yk3ggewJ' async="async" defer="defer"></script>
	<script type="text/javascript" src="/javascript/script.js"></script>
{% endblock %}