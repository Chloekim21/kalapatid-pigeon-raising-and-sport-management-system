{% extends 'initial/layout.html' %}
{% block content %}
  <div class="container">
    <h1 class="display-5">Messages</h1>
    <div class="msg-container scroll">
      {% if data | is_empty %}
        <p class="text-dark text-center">No Messaging available!</p>

      {% else %}

        {% include 'search/convo-search.html' %}

        <div id="oid" data-name="{{data}}"></div>
        {% for d in data | unique_msg | sort(false, true, "datetime") | reverse %}
          <div class="msg-content p-2">
            {% if d.username2 == username %}
              <div class="d-flex" id="global-chat-participant">
                <a class="border border-sm border-white text-decoration-none text-success  rounded   w-100 " href="{{ctx.DOMAIN_NAME}}/messages/{{d.messageId}}?username={{d.username1}}">
                  <img src="https://clipground.com/images/profile-logo-6.jpg" style="width: 50px; height: 50px;" id="globalchat-participant-picture">
                  <span class="mx-2 h3 fw-bolder">{{d.username1}}</span>
                  <sub class="mx-2">date updated:
                    {{d.datetime}}</sub>
                </a>
              </div>

            {% else %}

              <div class="d-flex" id="global-chat-participant">
                <a class="border border-sm border-white text-decoration-none text-success  rounded   w-100 " href="{{ctx.DOMAIN_NAME}}/messages/{{d.messageId}}?username={{d.username2}}">
                  <img src="https://clipground.com/images/profile-logo-6.jpg" style="width: 50px; height: 50px;" id="globalchat-participant-picture">
                  <span class="mx-2 h3 fw-bolder">{{d.username2}}</span>
                  <sub class="mx-2">date updated:
                    {{d.datetime}}</sub>
                </a>
              </div>

            {% endif %}
            <br>
          </div>
        {% endfor %}
      {% endif %}
    </div>

  </div>

  <script defer="defer" src="/javascript/realtime.js"></script>
{% endblock %}